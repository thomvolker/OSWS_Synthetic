<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Thom Volker &amp; Erik-Jan van Kesteren">

<title>Practical 2: Evaluating utility and privacy of synthetic data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="P2_files/libs/clipboard/clipboard.min.js"></script>
<script src="P2_files/libs/quarto-html/quarto.js"></script>
<script src="P2_files/libs/quarto-html/popper.min.js"></script>
<script src="P2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="P2_files/libs/quarto-html/anchor.min.js"></script>
<link href="P2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="P2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="P2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="P2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="P2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="P2_files/libs/kePrint-0.0.1/kePrint.js"></script>

<link href="P2_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#synthetic-data-utility" id="toc-synthetic-data-utility" class="nav-link active" data-scroll-target="#synthetic-data-utility">Synthetic data utility</a>
  <ul class="collapse">
  <li><a href="#univariate-data-utility" id="toc-univariate-data-utility" class="nav-link" data-scroll-target="#univariate-data-utility">Univariate data utility</a></li>
  <li><a href="#multivariate-data-utility" id="toc-multivariate-data-utility" class="nav-link" data-scroll-target="#multivariate-data-utility">Multivariate data utility</a>
  <ul class="collapse">
  <li><a href="#general-utility-measures" id="toc-general-utility-measures" class="nav-link" data-scroll-target="#general-utility-measures">General utility measures</a></li>
  <li><a href="#specific-utility-measures" id="toc-specific-utility-measures" class="nav-link" data-scroll-target="#specific-utility-measures">Specific utility measures</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#statistical-disclosure-control" id="toc-statistical-disclosure-control" class="nav-link" data-scroll-target="#statistical-disclosure-control">Statistical disclosure control</a></li>
  <li><a href="#inferences-from-synthetic-data" id="toc-inferences-from-synthetic-data" class="nav-link" data-scroll-target="#inferences-from-synthetic-data">Inferences from synthetic data</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Practical 2: Evaluating utility and privacy of synthetic data</h1>
<p class="subtitle lead">Fake it ’till you make it: Generating synthetic data with high utility in <code>R</code></p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Thom Volker &amp; Erik-Jan van Kesteren </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<hr>
<p><strong>Note.</strong> This practical builds on <a href="https://thomvolker.github.io/OSWS_Synthetic/practical/P1.html">Practical 1</a>, and assumes you have completed all these exercises.</p>
<hr>
<section id="synthetic-data-utility" class="level1">
<h1>Synthetic data utility</h1>
<p>The quality of synthetic data sets can be assessed on multiple levels and in multiple different ways (e.g., quantitatively, but also visually). Starting on a univariate level, the distributions of the synthetic data sets can be compared with the distribution of the observed data. For categorical variables, the observed counts in each category can be compared between the real and synthetic data. For continuous variables, the density of the real and synthetic data can be compared. Later on, we also look at the utility of the synthetic data on a multivariate level.</p>
<hr>
<section id="univariate-data-utility" class="level2">
<h2 class="anchored" data-anchor-id="univariate-data-utility">Univariate data utility</h2>
<p><strong>1. To get an idea of whether creating the synthetic data went accordingly, compare the first 10 rows of the original data with the first 10 rows of the synthetic data sets (inspect both the parametric and the non-parametric set). Do you notice any differences?</strong></p>
<hr>
<p><em>Hint:</em> You can extract the synthetic data from the synthetic data object by called <code>$syn</code> on the particular object.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>heart_failure <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>syn_param<span class="sc">$</span>syn <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>syn_nonparam<span class="sc">$</span>syn <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">anaemia</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">creatinine_phosphokinase</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">diabetes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ejection_fraction</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">platelets</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">serum_creatinine</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">serum_sodium</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">smoking</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">hypertension</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">deceased</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">follow_up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">75</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">582</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">265000</td>
<td style="text-align: right;">1.9</td>
<td style="text-align: right;">130</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: right;">55</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">7861</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">263358</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">136</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">146</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">162000</td>
<td style="text-align: right;">1.3</td>
<td style="text-align: right;">129</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">50</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">111</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">210000</td>
<td style="text-align: right;">1.9</td>
<td style="text-align: right;">137</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">160</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">327000</td>
<td style="text-align: right;">2.7</td>
<td style="text-align: right;">116</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: right;">90</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">47</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">204000</td>
<td style="text-align: right;">2.1</td>
<td style="text-align: right;">132</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">246</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">127000</td>
<td style="text-align: right;">1.2</td>
<td style="text-align: right;">137</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: right;">60</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">315</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">454000</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">131</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">157</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">263358</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">138</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: right;">80</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">123</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">388000</td>
<td style="text-align: right;">9.4</td>
<td style="text-align: right;">133</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">10</td>
</tr>
</tbody>
</table>
</div>

</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">anaemia</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">creatinine_phosphokinase</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">diabetes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ejection_fraction</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">platelets</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">serum_creatinine</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">serum_sodium</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">smoking</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">hypertension</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">deceased</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">follow_up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">53</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">178</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">367732.63</td>
<td style="text-align: right;">1.4222665</td>
<td style="text-align: right;">134</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">222</td>
</tr>
<tr class="even">
<td style="text-align: right;">61</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">-991</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">142856.18</td>
<td style="text-align: right;">1.5209304</td>
<td style="text-align: right;">147</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">113</td>
</tr>
<tr class="odd">
<td style="text-align: right;">50</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">2066</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">77936.18</td>
<td style="text-align: right;">2.2470844</td>
<td style="text-align: right;">140</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">167</td>
</tr>
<tr class="even">
<td style="text-align: right;">40</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">1858</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">355969.52</td>
<td style="text-align: right;">0.8467097</td>
<td style="text-align: right;">145</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">152</td>
</tr>
<tr class="odd">
<td style="text-align: right;">50</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">117</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">209264.97</td>
<td style="text-align: right;">1.1433037</td>
<td style="text-align: right;">138</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="even">
<td style="text-align: right;">59</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">324</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">319616.23</td>
<td style="text-align: right;">-0.5504862</td>
<td style="text-align: right;">133</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="odd">
<td style="text-align: right;">70</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">-991</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">229258.91</td>
<td style="text-align: right;">1.9875611</td>
<td style="text-align: right;">141</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">166</td>
</tr>
<tr class="even">
<td style="text-align: right;">65</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">1260</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">436055.22</td>
<td style="text-align: right;">4.2620808</td>
<td style="text-align: right;">135</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">48</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">1841</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">376515.15</td>
<td style="text-align: right;">1.9276125</td>
<td style="text-align: right;">134</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">123</td>
</tr>
<tr class="even">
<td style="text-align: right;">78</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">-1279</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">305902.66</td>
<td style="text-align: right;">0.1441727</td>
<td style="text-align: right;">140</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">181</td>
</tr>
</tbody>
</table>
</div>

</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">anaemia</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">creatinine_phosphokinase</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">diabetes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ejection_fraction</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">platelets</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">serum_creatinine</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">serum_sodium</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">sex</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">smoking</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">hypertension</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">deceased</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">follow_up</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">53</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">207</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">263358</td>
<td style="text-align: right;">0.70</td>
<td style="text-align: right;">133</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">74</td>
</tr>
<tr class="even">
<td style="text-align: right;">61</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">231</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">279000</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">136</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">76</td>
</tr>
<tr class="odd">
<td style="text-align: right;">50</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">250</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">302000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">132</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">186</td>
</tr>
<tr class="even">
<td style="text-align: right;">40</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">358</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">237000</td>
<td style="text-align: right;">1.18</td>
<td style="text-align: right;">134</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">186</td>
</tr>
<tr class="odd">
<td style="text-align: right;">50</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">582</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">194000</td>
<td style="text-align: right;">2.30</td>
<td style="text-align: right;">131</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: right;">59</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">60</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">162000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">136</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="odd">
<td style="text-align: right;">70</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">81</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">427000</td>
<td style="text-align: right;">1.83</td>
<td style="text-align: right;">134</td>
<td style="text-align: left;">Female</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">115</td>
</tr>
<tr class="even">
<td style="text-align: right;">65</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">135</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">362000</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">142</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">146</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">855</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">149000</td>
<td style="text-align: right;">1.30</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="even">
<td style="text-align: right;">78</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">211</td>
<td style="text-align: left;">Yes</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">149000</td>
<td style="text-align: right;">1.10</td>
<td style="text-align: right;">142</td>
<td style="text-align: left;">Male</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">180</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>You might notice that some of the continuous variables are not rounded as in the original data when using parametric synthesis models. Additionally, there are negative values in the synthetic version of the variable <code>creatinine_phosphokinase</code>, while the original data is strictly positive.</p>
<p>Both of these issues are not present when using CART, because CART draws values from the observed data (and thus can’t create values that are not in the observed data).</p>
</div>
</div>
</div>
<hr>
<p>Apart from inspecting the data itself, we can assess distributional similarity between the observed and synthetic data.</p>
<hr>
<p><strong>2. Compare the descriptive statistics from the synthetic data sets with the descriptive statistics from the observed data. What do you see?</strong></p>
<hr>
<p><em>Hint:</em> Use the function <code>describe()</code> from the <code>psych</code> package to do this.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>heart_failure <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>syn_param<span class="sc">$</span>syn <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>syn_nonparam<span class="sc">$</span>syn <span class="sc">|&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<caption>Observed data</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vars</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">median</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">trimmed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mad</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">range</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">skew</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kurtosis</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">60.83</td>
<td style="text-align: right;">11.89</td>
<td style="text-align: right;">60.0</td>
<td style="text-align: right;">60.22</td>
<td style="text-align: right;">14.83</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">95.0</td>
<td style="text-align: right;">55.0</td>
<td style="text-align: right;">0.42</td>
<td style="text-align: right;">-0.22</td>
<td style="text-align: right;">0.69</td>
</tr>
<tr class="even">
<td style="text-align: left;">anaemia*</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.41</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.28</td>
<td style="text-align: right;">-1.93</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">creatinine_phosphokinase</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">581.84</td>
<td style="text-align: right;">970.29</td>
<td style="text-align: right;">250.0</td>
<td style="text-align: right;">365.49</td>
<td style="text-align: right;">269.83</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">7861.0</td>
<td style="text-align: right;">7838.0</td>
<td style="text-align: right;">4.42</td>
<td style="text-align: right;">24.53</td>
<td style="text-align: right;">56.11</td>
</tr>
<tr class="even">
<td style="text-align: left;">diabetes*</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.42</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.40</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">-1.90</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ejection_fraction</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">38.08</td>
<td style="text-align: right;">11.83</td>
<td style="text-align: right;">38.0</td>
<td style="text-align: right;">37.43</td>
<td style="text-align: right;">11.86</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">80.0</td>
<td style="text-align: right;">66.0</td>
<td style="text-align: right;">0.55</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.68</td>
</tr>
<tr class="even">
<td style="text-align: left;">platelets</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">263358.03</td>
<td style="text-align: right;">97804.24</td>
<td style="text-align: right;">262000.0</td>
<td style="text-align: right;">256730.09</td>
<td style="text-align: right;">65234.40</td>
<td style="text-align: right;">25100.0</td>
<td style="text-align: right;">850000.0</td>
<td style="text-align: right;">824900.0</td>
<td style="text-align: right;">1.45</td>
<td style="text-align: right;">6.03</td>
<td style="text-align: right;">5656.17</td>
</tr>
<tr class="odd">
<td style="text-align: left;">serum_creatinine</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.39</td>
<td style="text-align: right;">1.03</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">1.19</td>
<td style="text-align: right;">0.30</td>
<td style="text-align: right;">0.5</td>
<td style="text-align: right;">9.4</td>
<td style="text-align: right;">8.9</td>
<td style="text-align: right;">4.41</td>
<td style="text-align: right;">25.19</td>
<td style="text-align: right;">0.06</td>
</tr>
<tr class="even">
<td style="text-align: left;">serum_sodium</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">136.63</td>
<td style="text-align: right;">4.41</td>
<td style="text-align: right;">137.0</td>
<td style="text-align: right;">136.82</td>
<td style="text-align: right;">4.45</td>
<td style="text-align: right;">113.0</td>
<td style="text-align: right;">148.0</td>
<td style="text-align: right;">35.0</td>
<td style="text-align: right;">-1.04</td>
<td style="text-align: right;">3.98</td>
<td style="text-align: right;">0.26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sex*</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.65</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.68</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">-0.62</td>
<td style="text-align: right;">-1.62</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking*</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.32</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">-1.42</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hypertension*</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.35</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.32</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.62</td>
<td style="text-align: right;">-1.62</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">deceased*</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.32</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">-1.42</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">follow_up</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">130.26</td>
<td style="text-align: right;">77.61</td>
<td style="text-align: right;">115.0</td>
<td style="text-align: right;">129.28</td>
<td style="text-align: right;">105.26</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">285.0</td>
<td style="text-align: right;">281.0</td>
<td style="text-align: right;">0.13</td>
<td style="text-align: right;">-1.22</td>
<td style="text-align: right;">4.49</td>
</tr>
</tbody>
</table>
</div>

</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<caption>Synthetic data (parametric)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vars</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">median</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">trimmed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mad</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">range</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">skew</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kurtosis</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">60.33</td>
<td style="text-align: right;">12.57</td>
<td style="text-align: right;">60.00</td>
<td style="text-align: right;">59.47</td>
<td style="text-align: right;">14.83</td>
<td style="text-align: right;">40.00</td>
<td style="text-align: right;">95.00</td>
<td style="text-align: right;">55.00</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">-0.13</td>
<td style="text-align: right;">0.73</td>
</tr>
<tr class="even">
<td style="text-align: left;">anaemia*</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.39</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.37</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">-1.82</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">creatinine_phosphokinase</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">493.29</td>
<td style="text-align: right;">1036.92</td>
<td style="text-align: right;">496.00</td>
<td style="text-align: right;">489.15</td>
<td style="text-align: right;">1009.65</td>
<td style="text-align: right;">-2172.00</td>
<td style="text-align: right;">4382.00</td>
<td style="text-align: right;">6554.00</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.21</td>
<td style="text-align: right;">59.97</td>
</tr>
<tr class="even">
<td style="text-align: left;">diabetes*</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.42</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.40</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.33</td>
<td style="text-align: right;">-1.90</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ejection_fraction</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">36.86</td>
<td style="text-align: right;">12.50</td>
<td style="text-align: right;">37.00</td>
<td style="text-align: right;">36.72</td>
<td style="text-align: right;">13.34</td>
<td style="text-align: right;">-1.00</td>
<td style="text-align: right;">69.00</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">-0.13</td>
<td style="text-align: right;">0.72</td>
</tr>
<tr class="even">
<td style="text-align: left;">platelets</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">260279.71</td>
<td style="text-align: right;">97198.21</td>
<td style="text-align: right;">258297.06</td>
<td style="text-align: right;">259569.64</td>
<td style="text-align: right;">98523.49</td>
<td style="text-align: right;">-14121.19</td>
<td style="text-align: right;">503313.43</td>
<td style="text-align: right;">517434.62</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">-0.26</td>
<td style="text-align: right;">5621.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">serum_creatinine</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.41</td>
<td style="text-align: right;">1.09</td>
<td style="text-align: right;">1.47</td>
<td style="text-align: right;">1.44</td>
<td style="text-align: right;">1.09</td>
<td style="text-align: right;">-1.37</td>
<td style="text-align: right;">4.26</td>
<td style="text-align: right;">5.63</td>
<td style="text-align: right;">-0.17</td>
<td style="text-align: right;">-0.37</td>
<td style="text-align: right;">0.06</td>
</tr>
<tr class="even">
<td style="text-align: left;">serum_sodium</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">136.32</td>
<td style="text-align: right;">4.79</td>
<td style="text-align: right;">136.00</td>
<td style="text-align: right;">136.27</td>
<td style="text-align: right;">4.45</td>
<td style="text-align: right;">123.00</td>
<td style="text-align: right;">149.00</td>
<td style="text-align: right;">26.00</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: right;">-0.25</td>
<td style="text-align: right;">0.28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sex*</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.65</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.68</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">-0.62</td>
<td style="text-align: right;">-1.62</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking*</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.35</td>
<td style="text-align: right;">0.48</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.31</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.64</td>
<td style="text-align: right;">-1.60</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hypertension*</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.31</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.27</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">-1.37</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">deceased*</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.29</td>
<td style="text-align: right;">0.46</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.24</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">0.90</td>
<td style="text-align: right;">-1.20</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">follow_up</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">140.02</td>
<td style="text-align: right;">74.84</td>
<td style="text-align: right;">141.00</td>
<td style="text-align: right;">141.93</td>
<td style="text-align: right;">75.61</td>
<td style="text-align: right;">-85.00</td>
<td style="text-align: right;">359.00</td>
<td style="text-align: right;">444.00</td>
<td style="text-align: right;">-0.26</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">4.33</td>
</tr>
</tbody>
</table>
</div>

</div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<caption>Synthetic data (non-parametric)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vars</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">median</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">trimmed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mad</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">range</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">skew</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kurtosis</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">60.33</td>
<td style="text-align: right;">12.57</td>
<td style="text-align: right;">60.0</td>
<td style="text-align: right;">59.47</td>
<td style="text-align: right;">14.83</td>
<td style="text-align: right;">40.0</td>
<td style="text-align: right;">95</td>
<td style="text-align: right;">55.0</td>
<td style="text-align: right;">0.53</td>
<td style="text-align: right;">-0.13</td>
<td style="text-align: right;">0.73</td>
</tr>
<tr class="even">
<td style="text-align: left;">anaemia*</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.41</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.39</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">-1.89</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">creatinine_phosphokinase</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">550.49</td>
<td style="text-align: right;">906.65</td>
<td style="text-align: right;">250.0</td>
<td style="text-align: right;">362.28</td>
<td style="text-align: right;">252.04</td>
<td style="text-align: right;">47.0</td>
<td style="text-align: right;">7702</td>
<td style="text-align: right;">7655.0</td>
<td style="text-align: right;">4.92</td>
<td style="text-align: right;">30.51</td>
<td style="text-align: right;">52.43</td>
</tr>
<tr class="even">
<td style="text-align: left;">diabetes*</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.44</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.22</td>
<td style="text-align: right;">-1.96</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ejection_fraction</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">38.02</td>
<td style="text-align: right;">11.53</td>
<td style="text-align: right;">38.0</td>
<td style="text-align: right;">37.11</td>
<td style="text-align: right;">10.38</td>
<td style="text-align: right;">14.0</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">66.0</td>
<td style="text-align: right;">0.74</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">platelets</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">273733.81</td>
<td style="text-align: right;">100656.21</td>
<td style="text-align: right;">263358.0</td>
<td style="text-align: right;">265781.36</td>
<td style="text-align: right;">81012.18</td>
<td style="text-align: right;">25100.0</td>
<td style="text-align: right;">742000</td>
<td style="text-align: right;">716900.0</td>
<td style="text-align: right;">1.11</td>
<td style="text-align: right;">2.80</td>
<td style="text-align: right;">5821.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">serum_creatinine</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.40</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">1.1</td>
<td style="text-align: right;">1.21</td>
<td style="text-align: right;">0.30</td>
<td style="text-align: right;">0.5</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">8.5</td>
<td style="text-align: right;">3.49</td>
<td style="text-align: right;">17.58</td>
<td style="text-align: right;">0.06</td>
</tr>
<tr class="even">
<td style="text-align: left;">serum_sodium</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">136.06</td>
<td style="text-align: right;">4.98</td>
<td style="text-align: right;">136.0</td>
<td style="text-align: right;">136.41</td>
<td style="text-align: right;">4.45</td>
<td style="text-align: right;">113.0</td>
<td style="text-align: right;">145</td>
<td style="text-align: right;">32.0</td>
<td style="text-align: right;">-1.30</td>
<td style="text-align: right;">4.02</td>
<td style="text-align: right;">0.29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sex*</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.66</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">1.70</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">-0.67</td>
<td style="text-align: right;">-1.56</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking*</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.32</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.28</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">-1.45</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hypertension*</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.38</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.35</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.49</td>
<td style="text-align: right;">-1.77</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="even">
<td style="text-align: left;">deceased*</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">1.33</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.29</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">0.71</td>
<td style="text-align: right;">-1.49</td>
<td style="text-align: right;">0.03</td>
</tr>
<tr class="odd">
<td style="text-align: left;">follow_up</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">299</td>
<td style="text-align: right;">127.09</td>
<td style="text-align: right;">77.44</td>
<td style="text-align: right;">113.0</td>
<td style="text-align: right;">125.99</td>
<td style="text-align: right;">108.23</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">276.0</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">-1.25</td>
<td style="text-align: right;">4.48</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p><br><br></p>
<p>The descriptive statistics are not exactly similar, but come rather close in terms of mean and standard deviation. When looking at higher-order moments and the minimum and maximum, we see that there are some noticeable differences for parametrically synthesized data, but not so much for the non-parametrically synthesized data. We pay more attention to these issues when we visually inspect the synthetic data.</p>
</div>
</div>
</div>
<hr>
<p>We will now visually compare the distributions of the observed and synthetic data, as this typically provides a more thorough understanding of the quality of the synthetic data.</p>
<hr>
<p><strong>3. Use <code>compare()</code> from the synthpop package to compare the distributions of the observed and parametric synthetic data set, set the parameter <code>utility.stats = NULL</code>. What do you see?</strong></p>
<hr>
<p><em>For now, ignore the table below the figures, we will come to this at a later point.</em></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare</span>(syn_param, heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Comparing percentages observed with synthetic</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-parametric-results-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press return for next variable(s): </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-parametric-results-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press return for next variable(s): </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-parametric-results-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press return for next variable(s): </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-parametric-results-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Selected utility measures:
                             pMSE    S_pMSE df
age                      0.000441  0.527833  4
anaemia                  0.000349  1.669216  1
creatinine_phosphokinase 0.067826 81.119499  4
diabetes                 0.000000  0.000000  1
ejection_fraction        0.013486 16.129066  4
platelets                0.006824  8.161064  4
serum_creatinine         0.054388 65.048276  4
serum_sodium             0.005093  6.090879  4
sex                      0.000000  0.000000  1
smoking                  0.000201  0.961608  1
hypertension             0.000381  1.822597  1
deceased                 0.000210  1.004831  1
follow_up                0.012051 14.413308  4</code></pre>
</div>
</div>
<p>You might notice that there are substantial differences between the distributions of some of the continuous variables. Especially for the variables <code>creatinine_phosphokinase</code>, <code>serum_creatinine</code> and <code>follow_up</code>, the synthetic data does not seem to capture the distribution of the observed data well. Also for the other variables, there are some discrepancies between the marginal distributions of the observed and synthetic data.</p>
<p>Of course, this could have been expected, since some of the variables are highly skewed, while we impose a normal distribution on each variable with the current set of parametric models. It is quite likely that we could have done a better job by using more elaborate data manipulation (e.g., transforming variables such that there distribution corresponds more closely to a normal distribution (and back-transforming afterwards)).</p>
<p>For the categorical variables, we seem to be doing a decent job on the marginal levels, as there are only small differences between the observed and synthetic frequencies in each level.</p>
</div>
</div>
</div>
<hr>
<p><strong>4. Use <code>compare()</code> from the synthpop package to compare the distributions of the observed and non-parametric synthetic data set, set the parameter <code>utility.stats = NULL</code>. What do you see?</strong></p>
<hr>
<p><em>Again, ignore the table below the figures, we will come to this at a later point.</em></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare</span>(syn_nonparam, heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Comparing percentages observed with synthetic</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-nonparametric-results-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press return for next variable(s): </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-nonparametric-results-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press return for next variable(s): </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-nonparametric-results-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Press return for next variable(s): </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/compare-nonparametric-results-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Selected utility measures:
                             pMSE   S_pMSE df
age                      0.000441 0.527833  4
anaemia                  0.000072 0.342556  1
creatinine_phosphokinase 0.000863 1.032628  4
diabetes                 0.000182 0.872595  1
ejection_fraction        0.000329 0.393494  4
platelets                0.001892 2.262856  4
serum_creatinine         0.001142 1.366083  4
serum_sodium             0.001286 1.538074  4
sex                      0.000028 0.132992  1
smoking                  0.000003 0.015301  1
hypertension             0.000244 1.167167  1
deceased                 0.000029 0.136973  1
follow_up                0.000246 0.294417  4</code></pre>
</div>
</div>
<p>Using non-parametric synthesis models (i.e., CART), we do a much better job in recreating the shape of the original data. In fact, the marginal distributions are close to identical, including all irregularities in the original data.</p>
</div>
</div>
</div>
<hr>
<p>There are also other, more formal, ways to assess the utility of the synthetic data, although there is some critique against these methods <span class="citation" data-cites="drechsler_utility_psd">(see, e.g., <a href="#ref-drechsler_utility_psd" role="doc-biblioref">Drechsler 2022</a>)</span>. Here, we will discuss one of these measures, the <span class="math inline">\(pMSE\)</span>, but there are others (although utility measures tend to correlate strongly in general). The intuition behind the <span class="math inline">\(pMSE\)</span> is to predict whether an observation is actually observed, or a synthetic record. If this is possible, the observed and synthetic data differ on at least one dimension, which allows to distinguish between the records.</p>
<p>Formally, the <span class="math inline">\(pMSE\)</span> is defined as <span class="math display">\[
pMSE = \frac{1}{n_{obs} + n_{syn}}
\Bigg(
\sum^{n_{obs}}_{i=1} \Big(\hat{\pi}_i - \frac{n_{obs}}{n_{obs} + n_{syn}}\Big)^2 +
\sum^{n_{obs} + n_{syn}}_{i={(n_{obs} + 1)}} \Big(\hat{\pi_i} - \frac{n_{syn}}{n_{obs} + n_{syn}}\Big)^2
\Bigg),
\]</span> which, in our case, simplifies to <span class="math display">\[
pMSE = \frac{1}{598}
\Bigg(
\sum^{n_{obs} + n_{syn}}_{i=1} \Big(\hat{\pi}_i - 0.5\Big)^2
\Bigg),
\]</span> where <span class="math inline">\(n_{obs}\)</span> and <span class="math inline">\(n_{syn}\)</span> are the sample sizes of the observed and synthetic data, <span class="math inline">\(\hat{\pi}_i\)</span> is the probability of belonging to the synthetic data.</p>
<hr>
<p><strong>5. Calculate the <span class="math inline">\(pMSE\)</span> for the variable <code>creatinine_phosphokinase</code> for both synthetic sets and compare the values between both synthesis methods. Use a logistic regression model to create the probabilities <span class="math inline">\(\pi\)</span>. What do you see?</strong></p>
<hr>
<p><em>Hint:</em> You can use the function <code>utility.gen()</code> and set the arguments <code>method = "logit"</code> (this denotes the model used to predict the probabilities), <code>vars = "creatinine_phosphokinase"</code> and <code>maxorder = 0</code> (which denotes that we don’t want to specify interactions, as we only have a single variable here).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.gen</span>(syn_param, </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>            heart_failure, </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">method =</span> <span class="st">"logit"</span>, </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="st">"creatinine_phosphokinase"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">maxorder =</span> <span class="dv">0</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.gen</span>(syn_nonparam, </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>            heart_failure, </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">method =</span> <span class="st">"logit"</span>, </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="st">"creatinine_phosphokinase"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">maxorder =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Utility score calculated by method: logit

Call:
utility.gen.synds(object = syn_param, data = heart_failure, method = "logit", 
    maxorder = 0, vars = "creatinine_phosphokinase")

Selected utility measures
    pMSE   S_pMSE 
0.000487 2.328462 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Utility score calculated by method: logit

Call:
utility.gen.synds(object = syn_nonparam, data = heart_failure, 
    method = "logit", maxorder = 0, vars = "creatinine_phosphokinase")

Selected utility measures
    pMSE   S_pMSE 
0.000070 0.334188 </code></pre>
</div>
</div>
<p>The <span class="math inline">\(pMSE\)</span> is about seven times higher for the parametrically synthesized data set.</p>
<p>It can be hard to interpret the values of the <span class="math inline">\(pMSE\)</span>, because they say little about how useful the synthetic data is in general. To get a more insightful measure, we can take ratio of the calculated <span class="math inline">\(pMSE\)</span> over the expected <span class="math inline">\(pMSE\)</span> under the null distribution of a <em>correct</em> synthesis model (i.e., in line with the data-generating model). The <span class="math inline">\(pMSE\)</span> ratio is given by <span class="math display">\[
\begin{aligned}
pMSE \text{ ratio } &amp;=
\frac{pMSE}
{(k-1)(\frac{n_{\text{obs}}}{n_{\text{syn}} + n_{\text{obs}}})^2(\frac{n_{\text{syn}}}{n_{\text{syn}} + n_{\text{obs}}}) / (n_{\text{obs}} + n_{\text{syn}})} \\ &amp;=
\frac{pMSE}{(k-1)(\frac{1}{2})^3/(n_{obs} + n_{syn})},
\end{aligned}
\]</span> where <span class="math inline">\(k\)</span> denotes the number of predictors in the propensity score model, including the intercept. Note that this formulation only holds for a <span class="math inline">\(pMSE\)</span> that is obtained through logistic regression. When different methods are used to calculate the probabilities, the null distribution can be obtained by using a permutation test.</p>
<p>Ideally, the <span class="math inline">\(pMSE\)</span> ratio equals <span class="math inline">\(1\)</span>, but according to the <code>synthpop</code> authors, values below <span class="math inline">\(3\)</span> are indicative of high quality synthetic data, while values below <span class="math inline">\(10\)</span> are deemed acceptable <span class="citation" data-cites="raab2021utility">(<a href="#ref-raab2021utility" role="doc-biblioref">Raab, Nowok, and Dibben 2021</a>)</span>. This would indicate that both synthesis models are very good models to synthesize the variable <code>creatinine_phosphokinase</code>. However, our logistic regression model only evaluates whether the mean of the two variables is similar, and might thus not be the best model for evaluating the quality of the synthetic data in this case.</p>
</div>
</div>
</div>
<hr>
<p><strong>6. Recalculate the <span class="math inline">\(pMSE\)</span> for the variable <code>creatinine_phosphokinase</code> for both synthetic sets, but this time using a CART model to estimate the probabilities <span class="math inline">\(\pi\)</span>. What do you see?</strong></p>
<hr>
<p><em>Hint:</em> You can again use the function <code>utility.gen()</code> and set the arguments <code>method = "cart"</code> and <code>vars = "creatinine_phosphokinase"</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.gen</span>(syn_param, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>            heart_failure, </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">method =</span> <span class="st">"cart"</span>, </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="st">"creatinine_phosphokinase"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.gen</span>(syn_nonparam, </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>            heart_failure, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">method =</span> <span class="st">"cart"</span>, </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">vars =</span> <span class="st">"creatinine_phosphokinase"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Running 50 permutations to get NULL utilities and printing every 10th.
synthesis 10 20 30 40 50 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Utility score calculated by method: cart

Call:
utility.gen.synds(object = syn_param, data = heart_failure, method = "cart", 
    vars = "creatinine_phosphokinase")

Null utilities simulated from a permutation test with 50 replications.

Selected utility measures
    pMSE   S_pMSE 
0.137999 4.822987 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Running 50 permutations to get NULL utilities and printing every 10th.
synthesis 10 20 30 40 50 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Utility score calculated by method: cart

Call:
utility.gen.synds(object = syn_nonparam, data = heart_failure, 
    method = "cart", vars = "creatinine_phosphokinase")

Null utilities simulated from a permutation test with 50 replications.

Selected utility measures
    pMSE   S_pMSE 
0.021460 1.120306 </code></pre>
</div>
</div>
<p>The <span class="math inline">\(pMSE\)</span>-ratio is about four times higher for the parametrically synthesized data set using the CART model to estimate the probabilities <span class="math inline">\(\pi\)</span>. This indicates that the nonparametric synthesis method is better at reproducing the variable <code>creatinine_phosphokinase</code>. However, both <span class="math inline">\(pMSE\)</span>-ratio values are still well below <span class="math inline">\(10\)</span>, indicating reasonable synthetic data quality, where I would argue that the parametric synthetic version of <code>creatinine_phosphokinase</code> is a poor representation of the original data.</p>
</div>
</div>
</div>
<hr>
</section>
<section id="multivariate-data-utility" class="level2">
<h2 class="anchored" data-anchor-id="multivariate-data-utility">Multivariate data utility</h2>
<p>Being able to reproduce the original univariate distributions is a good first step, but generally the goal of synthetic data reaches beyond that. Specifically, we often want to reproduce the relationships between the variables in the data. In the previous section, we saw that an evaluation of utility is often best carried out through visualizations. However, creating visualizations is cumbersome for multivariate relationships. Creating visualizations beyond bivariate relationships is often not feasible, whereas displaying all bivariate relationships in the data already results in <span class="math inline">\(p(p-1)/2\)</span> different figures.</p>
<p>In the synthetic data literature, a distinction is often made between general and specific utility measures. General utility measures assess to what extent the relationships between combinations of variables (and potential interactions between them) are preserved in the synthetic data set. These measures are often for pairs of variables, or for all combinations of variables. Specific utility measures focus, as the name already suggests, on a specific analysis. This analysis is performed on the observed data and the synthetic data, and the similarity between inferences on these data sets is quantified.</p>
<hr>
<section id="general-utility-measures" class="level3">
<h3 class="anchored" data-anchor-id="general-utility-measures">General utility measures</h3>
<hr>
<p>Continuing with our <span class="math inline">\(pMSE\)</span> approach, we can inspect which variables can predict whether observations are “true” or “synthetic” using the <span class="math inline">\(pMSE\)</span>-ratio, similarly to what we just did using individual variables. We first try to predict the class of all observations by using all variables simultaneously, and hereafter we look at the results for all unique pairs of variables in the data.</p>
<hr>
<p><strong>7. Use the function <code>utility.gen()</code> from the <code>synthpop</code> package to calculate the <span class="math inline">\(pMSE\)</span>-ratio using all variables for both synthetic sets. What do you see?</strong></p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.gen</span>(syn_param, heart_failure)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.gen</span>(syn_nonparam, heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Utility score calculated by method: cart

Call:
utility.gen.synds(object = syn_param, data = heart_failure, print.flag = F)

Null utilities simulated from a permutation test with 50 replications.

Selected utility measures
    pMSE   S_pMSE 
0.173414 3.237469 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Utility score calculated by method: cart

Call:
utility.gen.synds(object = syn_nonparam, data = heart_failure, 
    print.flag = F)

Null utilities simulated from a permutation test with 50 replications.

Selected utility measures
    pMSE   S_pMSE 
0.100042 1.953030 </code></pre>
</div>
</div>
<p>The <code>CART</code> model was somewhat better, but the difference is relatively small. To get more insight into which variables and bivariate relationships were synthesized accordingly, and which can be improved, we can use <code>utility.tables.list()</code>.</p>
</div>
</div>
</div>
<hr>
<p><strong>8. Use the function <code>utility.tables()</code> from the <code>synthpop</code> package to calculate the <span class="math inline">\(pMSE\)</span>-ratio for each pair of variables for both synthetic sets. What do you see?</strong></p>
<hr>
<p><em>Hint:</em> To use the same color scale for both synthetic data sets, you can set the arguments <code>min.scale = 0</code> and <code>max.scale = 45</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.tables</span>(syn_param, heart_failure, <span class="at">min.scale =</span> <span class="dv">0</span>, <span class="at">max.scale =</span> <span class="dv">45</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">utility.tables</span>(syn_nonparam, heart_failure, <span class="at">min.scale =</span> <span class="dv">0</span>, <span class="at">max.scale =</span> <span class="dv">45</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Two-way utility: S_pMSE value plotted for 78 pairs of variables.

Variable combinations with worst 5 utility scores (S_pMSE):
     02.anaemia:03.creatinine_phosphokinase 
                                    39.1081 
    03.creatinine_phosphokinase:04.diabetes 
                                    36.7613 
    03.creatinine_phosphokinase:12.deceased 
                                    36.5158 
     03.creatinine_phosphokinase:10.smoking 
                                    36.4113 
03.creatinine_phosphokinase:11.hypertension 
                                    36.3940 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/pairwise-utility-results-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Medians and maxima of selected utility measures for all tables compared
       Medians  Maxima
pMSE    0.0141  0.1110
S_pMSE  5.1911 39.1081
df      9.0000 24.0000

For more details of all scores use print.tabs = TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Two-way utility: S_pMSE value plotted for 78 pairs of variables.

Variable combinations with worst 5 utility scores (S_pMSE):
                          02.anaemia:09.sex 
                                     4.1218 
                        06.platelets:09.sex 
                                     3.5183 
                      02.anaemia:10.smoking 
                                     3.2361 
03.creatinine_phosphokinase:08.serum_sodium 
                                     2.6997 
          05.ejection_fraction:13.follow_up 
                                     2.6599 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/pairwise-utility-results-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Medians and maxima of selected utility measures for all tables compared
       Medians  Maxima
pMSE    0.0027  0.0135
S_pMSE  1.2914  4.1218
df      9.0000 24.0000

For more details of all scores use print.tabs = TRUE.</code></pre>
</div>
</div>
<p>Here, we finally see that our parametric synthesis model is severely flawed. Quite some of the <span class="math inline">\(pMSE\)</span> ratios are larger than 20, which means that we did in poor job in synthesizing these variables or the relationship of these variables with other variables. Note that we partly knew this already from our visualizations. Our non-parametric synthesis model is doing very good. The highest <span class="math inline">\(pMSE\)</span>-ratio values are (much) smaller than <span class="math inline">\(10\)</span>, which actually indicates that our synthetic data are of high quality.</p>
</div>
</div>
</div>
<hr>
</section>
<section id="specific-utility-measures" class="level3">
<h3 class="anchored" data-anchor-id="specific-utility-measures">Specific utility measures</h3>
<p>Specific utility measures assess whether the same analysis on the observed and the synthetic data gives similar results. Say that we are interested in, for instance, the relationship between whether a person survives, the age of this person, whether this person has diabetes and whether or not this person smokes, including the follow-up time as a control variable in the model.</p>
<hr>
<p><strong>9. Fit this model as a logistic regression model using <code>glm.synds()</code> with <code>family = binomial</code> and <code>data = synthetic_data_object</code>. Compare the results obtained with both synthetic data sets with the results obtained on the original data. What do you see?</strong></p>
<p><em>Hint:</em> You can also use <code>compare.fit.synds()</code> to compare the results of the models fitted on the synthetic data sets with the model fitted on the observed data.</p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>fit_param <span class="ot">&lt;-</span> <span class="fu">glm.synds</span>(deceased <span class="sc">~</span> age <span class="sc">+</span> diabetes <span class="sc">+</span> smoking <span class="sc">+</span> follow_up,</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">family =</span> binomial, </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> syn_param)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>fit_nonparam <span class="ot">&lt;-</span> <span class="fu">glm.synds</span>(deceased <span class="sc">~</span> age <span class="sc">+</span> diabetes <span class="sc">+</span> smoking <span class="sc">+</span> follow_up,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">family =</span> binomial, </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data =</span> syn_nonparam)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>fit_obs <span class="ot">&lt;-</span> <span class="fu">glm</span>(deceased <span class="sc">~</span> age <span class="sc">+</span> diabetes <span class="sc">+</span> smoking <span class="sc">+</span> follow_up,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> binomial, </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit_param)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Fit to synthetic data set with a single synthesis. Inference to coefficients
and standard errors that would be obtained from the original data.

Call:
glm.synds(formula = deceased ~ age + diabetes + smoking + follow_up, 
    family = binomial, data = syn_param)

Combined estimates:
            xpct(Beta) xpct(se.Beta) xpct(z) Pr(&gt;|xpct(z)|)    
(Intercept)   0.203118      0.948495  0.2141        0.83043    
age           0.027391      0.012734  2.1511        0.03147 *  
diabetesYes   0.107183      0.339593  0.3156        0.75229    
smokingYes    0.330859      0.343451  0.9633        0.33538    
follow_up    -0.024043      0.003265 -7.3638      1.788e-13 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit_nonparam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Fit to synthetic data set with a single synthesis. Inference to coefficients
and standard errors that would be obtained from the original data.

Call:
glm.synds(formula = deceased ~ age + diabetes + smoking + follow_up, 
    family = binomial, data = syn_nonparam)

Combined estimates:
            xpct(Beta) xpct(se.Beta) xpct(z) Pr(&gt;|xpct(z)|)    
(Intercept)  0.2566964     0.9447743  0.2717        0.78585    
age          0.0304290     0.0142923  2.1290        0.03325 *  
diabetesYes  0.4642362     0.3400045  1.3654        0.17213    
smokingYes  -0.3846838     0.3597232 -1.0694        0.28489    
follow_up   -0.0285308     0.0034808 -8.1966      2.474e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit_obs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = deceased ~ age + diabetes + smoking + follow_up, 
    family = binomial, data = heart_failure)

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)    
(Intercept) -0.84667    0.90336  -0.937  0.34863    
age          0.03651    0.01332   2.740  0.00614 ** 
diabetesYes  0.11021    0.31027   0.355  0.72242    
smokingYes  -0.20590    0.32636  -0.631  0.52811    
follow_up   -0.01932    0.00258  -7.486 7.08e-14 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 375.35  on 298  degrees of freedom
Residual deviance: 270.87  on 294  degrees of freedom
AIC: 280.87

Number of Fisher Scoring iterations: 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare.fit.synds</span>(fit_param, heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call used to fit models to the data:
glm.synds(formula = deceased ~ age + diabetes + smoking + follow_up, 
    family = binomial, data = syn_param)

Differences between results based on synthetic and observed data:
              Synthetic    Observed         Diff Std. coef diff CI overlap
(Intercept)  0.20311831 -0.84666625  1.049784561    1.162090890  0.7035428
age          0.02739155  0.03650504 -0.009113495   -0.684058013  0.8254922
diabetesYes  0.10718298  0.11021309 -0.003030108   -0.009766139  0.9975086
smokingYes   0.33085915 -0.20589862  0.536757766    1.644690904  0.5804283
follow_up   -0.02404289 -0.01931552 -0.004727370   -1.832233929  0.5325848

Measures for one synthesis and 5 coefficients
Mean confidence interval overlap:  0.7279113
Mean absolute std. coef diff:  1.066568

Mahalanobis distance ratio for lack-of-fit (target 1.0): 1.72
Lack-of-fit test: 8.576733; p-value 0.1272 for test that synthesis model is
compatible with a chi-squared test with 5 degrees of freedom.

Confidence interval plot:</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/specific-utility-compare-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare.fit.synds</span>(fit_nonparam, heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call used to fit models to the data:
glm.synds(formula = deceased ~ age + diabetes + smoking + follow_up, 
    family = binomial, data = syn_nonparam)

Differences between results based on synthetic and observed data:
              Synthetic    Observed         Diff Std. coef diff CI overlap
(Intercept)  0.25669642 -0.84666625  1.103362666      1.2214008 0.68841244
age          0.03042904  0.03650504 -0.006076006     -0.4560644 0.88365490
diabetesYes  0.46423621  0.11021309  0.354023115      1.1410284 0.70891597
smokingYes  -0.38468383 -0.20589862 -0.178785211     -0.5478196 0.86024754
follow_up   -0.02853082 -0.01931552 -0.009215308     -3.5716685 0.08884333

Measures for one synthesis and 5 coefficients
Mean confidence interval overlap:  0.6460148
Mean absolute std. coef diff:  1.387596

Mahalanobis distance ratio for lack-of-fit (target 1.0): 3.01
Lack-of-fit test: 15.05894; p-value 0.0101 for test that synthesis model is
compatible with a chi-squared test with 5 degrees of freedom.

Confidence interval plot:</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="P2_files/figure-html/specific-utility-compare-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The results obtained for both synthetic data sets are quite similar, but the parametrically synthesized data are somewhat closer to the results from the analysis on the real data than the non-parametrically synthesized data. This is quite paradoxical, as we saw before that the non-parametric synthesis model yielded much more realistic data than the parametric synthesis model. This shows an important mismatch between general and specific utility. That is, to obtain high specific utility, it is not necessary to have high general utility. Moreover, high general utility does not guarantee high specific utility. Additionally, these results show that synthetic data with lower general utility can still be very useful if the goal is to perform specific analyses.</p>
</div>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="statistical-disclosure-control" class="level1">
<h1>Statistical disclosure control</h1>
<hr>
<p>Synthetic data can provide a relatively safe framework for sharing data. However, some risks will remain present, and it is important to evaluate these risks. For example, it can be the case that the synthesis models were so complex that the synthetic records are very similar or even identical to the original records, which can lead to privacy breaches.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Privacy of synthetic data
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Synthetic data by itself does not provide any formal privacy guarantees. These guarantees can be incorporated, for example by using differentially private synthesis methods. However, these methods are not yet widely available in <code>R</code>. If privacy is not built-in by design, it remains important to inspect the synthetic data for potential risks. Especially if you’re not entirely sure, it is better to stay at the safe side: use relatively simple, parametric models, check for outliers, and potentially add additional noise to the synthetic data. See also Chapter 4 in the book <a href="https://unece.org/sites/default/files/2022-11/ECECESSTAT20226.pdf"><em>Synthetic Data for Official Statistics</em></a>.</p>
</div>
</div>
</div>
<hr>
<p><strong>10. Call the function <code>replicated.uniques()</code> on the synthetic data. This function checks whether there are duplicates of observations that were unique in the original data.</strong></p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replicated.uniques</span>(syn_param, heart_failure)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">replicated.uniques</span>(syn_nonparam, heart_failure)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Show Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>$replications
  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[289] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$no.uniques
[1] 299

$no.replications
[1] 0

$per.replications
[1] 0</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$replications
  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[169] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[181] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[205] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[229] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[277] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[289] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE

$no.uniques
[1] 299

$no.replications
[1] 0

$per.replications
[1] 0</code></pre>
</div>
</div>
<p>None of observations occur repeatedly, so we have not accidentally copied any of the “true” observations into the synthetic sets. This provides some safeguard against accidentally releasing sensitive information. However, if the data contains really sensitive information, this might not be enough, and one could for example check whether the synthetic data differs from the observed data along multiple dimensions (i.e., variables). Such additional checks depend on the problem at hand. Additionally, one might want to take additional measures against accidentally disclosing information about observations, for example by drawing some of the variables from a parametric distribution. Even before distribution synthetic data, think wisely about whether there may remain any disclosure risks with respect to the data that will be distributed.</p>
</div>
</div>
</div>
<hr>
<p>If you find the synthetic data too risky to be released as is, you can impose additional statistical disclosure limitation techniques, that additionally reduce the information in the synthetic data. For example, you can add noise to the synthetic data by using smoothing, or you can impose additional top/bottom coding, such that extreme values cannot appear in the synthetic data. This is easily done using the function <code>sdc()</code> as implemented in <code>synthpop</code>. Which statistical disclosure techniques to apply typically depends on the problem at hand, the sensitivity of the data and the synthesis strategies used. For example, for our non-parametric synthesis strategy, we re-use observed values, which might lead to an unacceptable risk of disclosure. Then, we could apply smoothing to the synthetic data to reduce the risk of disclosure.</p>
</section>
<section id="inferences-from-synthetic-data" class="level1">
<h1>Inferences from synthetic data</h1>
<p>Lastly, when you have obtained a synthetic data set and want to make inferences from this set, you have to be careful, because generating synthetic data adds variance to the already present sampling variance that you take into account when evaluating hypotheses. Specifically, if you want to make inferences with respect to the sample of original observations, you can use unaltered analysis techniques and corresponding, conventional standard errors.</p>
<p>However, if you want to inferences with respect to the population the sample is taken from, you will have to adjust the standard errors, to account for the fact that the synthesis procedure adds additional variance. The amount of variance that is added, depends on the number of synthetic data sets that are generated. Intuitively, when generating multiple synthetic data sets, the additional random noise that is induced by the synthesis cancels out, making the parameter estimates more stable.</p>
<p>There are two ways to obtain statistically valid results from synthetic data. The first requires that you have multiple synthetic data sets, and estimates the variance between the obtained estimates in each of the synthetic data sets. The corresponding pooling rules are presented in <span class="citation" data-cites="reiter_partially_inference_2003">Reiter (<a href="#ref-reiter_partially_inference_2003" role="doc-biblioref">2003</a>)</span>. For scalar <span class="math inline">\(Q\)</span>, with <span class="math inline">\(q^{(i)}\)</span> and <span class="math inline">\(u^{(i)}\)</span> the point estimate and the corresponding variance estimate in synthetic data set <span class="math inline">\(D^{(i)}\)</span> for <span class="math inline">\(i = 1, \dots, m\)</span>, the following quantities are needed for inferences:</p>
<p><span class="math display">\[
\begin{aligned}
\bar{q}_m &amp;= \sum_{i=1}^m \frac{q^{(i)}}{m}, \\
b_m &amp;= \sum_{i=1}^m \frac{(q^{(i)} - \bar{q}_m)}{m-1}, \\
\bar{u}_m &amp;= \sum_{i=1}^m \frac{u^{(i)}}{m}.
\end{aligned}
\]</span></p>
<p>The analyst can use <span class="math inline">\(\bar{q}_m\)</span> to estimate <span class="math inline">\(Q\)</span> and <span class="math display">\[
T_p = \frac{b_m}{m} + \bar{u}_m
\]</span> to estimate the variance of <span class="math inline">\(\bar{q}_m\)</span>. Then, <span class="math inline">\(\frac{b_m}{m}\)</span> is the correction factor for the additional variance due to using a finite number of imputations.</p>
<p>The second way to obtain statistically valid results from synthetic data allows for multiple synthetic data sets, but does not require it <span class="citation" data-cites="raab2016practical">(<a href="#ref-raab2016practical" role="doc-biblioref">Raab, Nowok, and Dibben 2016</a>)</span>. In this case, the between-imputation variance is estimated from the standard error(s) of the estimates, which simplifies the total variance of each estimate to <span class="math display">\[
T_s = \frac{\bar{u}_m}{m} + \bar{u}_m.
\]</span> When you have <span class="math inline">\(m = 1\)</span> synthetic data set, we have <span class="math inline">\(T_s = 2u\)</span>, where <span class="math inline">\(u\)</span> is the variance estimate obtained in that synthetic set.</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-drechsler_utility_psd" class="csl-entry" role="listitem">
Drechsler, Jörg. 2022. <span>“Challenges in Measuring Utility for Fully Synthetic Data.”</span> In <em>Privacy in Statistical Databases</em>, edited by Josep Domingo-Ferrer and Maryline Laurent, 220–33. Cham: Springer International Publishing. <a href="https://doi.org/10.1007/978-3-031-13945-1_16">https://doi.org/10.1007/978-3-031-13945-1_16</a>.
</div>
<div id="ref-raab2016practical" class="csl-entry" role="listitem">
Raab, Gillian M, Beata Nowok, and Chris Dibben. 2016. <span>“Practical Data Synthesis for Large Samples.”</span> <em>Journal of Privacy and Confidentiality</em> 7 (3): 67–97.
</div>
<div id="ref-raab2021utility" class="csl-entry" role="listitem">
———. 2021. <span>“Assessing, Visualizing and Improving the Utility of Synthetic Data.”</span> <em>arXiv Preprint arXiv:2109.12717</em>.
</div>
<div id="ref-reiter_partially_inference_2003" class="csl-entry" role="listitem">
Reiter, Jerome P. 2003. <span>“Inference for Partially Synthetic, Public Use Microdata Sets.”</span> <em>Survey Methodology</em> 29 (2): 181–88.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>